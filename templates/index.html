<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Malicious Mail LLM Evaluation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Malicious Mail LLM Evaluation</h1>
    <div class="container">
        <div id="results"></div>
    </div>

    <script>
        function fetchResults() {
            fetch('/get-results')
                .then(response => response.json())
                .then(data => {
                    const resultsContainer = document.getElementById('results');
                    resultsContainer.innerHTML = '';
                    data.forEach(email => {
                        const emailDiv = document.createElement('div');
                        emailDiv.className = 'email-box';
                        emailDiv.innerHTML = `
                            <h2>${email.subject}</h2>
                            <p><b>Sender:</b> ${email.sender}</p>
                            <p><b>Sender Email:</b> ${email.sender_address}</p>
                            <p><b>Timestamp:</b> ${email.timestamp}</p>
                            <div class="email-content"><p>${email.content}</p></div>
                            <div class="email-evaluation"><p>${email.evaluation}</p></div>
                        `;
                        resultsContainer.appendChild(emailDiv);
                    });
                });
        }

        setInterval(fetchResults, 5000);
    </script>
</body>
</html>
